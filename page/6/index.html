<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 6 | darion.johannes.yaphet</title>
  <meta name="author" content="Darion Yaphet">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="darion.johannes.yaphet"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="darion.johannes.yaphet" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">darion.johannes.yaphet</a></h1>
  <h2><a href="/">long is the way and hard  that out of Hell leads up to light</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-04-21T13:02:24.000Z"><a href="/2016/04/21/algorithms/search/">2016-04-21</a></time>
      
      
  
    <h1 class="title"><a href="/2016/04/21/algorithms/search/"></a></h1>
  

    </header>
    <div class="entry">
      
        
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-04-21T13:02:24.000Z"><a href="/2016/04/21/algorithms/paxos/">2016-04-21</a></time>
      
      
  
    <h1 class="title"><a href="/2016/04/21/algorithms/paxos/"></a></h1>
  

    </header>
    <div class="entry">
      
        <p>###Paxos </p>
<p>角色分为proposers，acceptors，和learners（允许身兼数职）。</p>
<p><code>proposers</code>提出提案，提案信息包括提案编号和提议的value；<code>acceptor</code>收到提案后可以接受（accept）提案，若提案获得多数acceptors的接受，则称该提案被批准（chosen）；<code>learners</code>只能“学习”被批准的提案。划分角色后，就可以更精确的定义问题：</p>
<ol>
<li>决议（value）只有在被proposers提出后才能被批准（未经批准的决议称为“提案（proposal）”）</li>
<li>在一次Paxos算法的执行实例中，只批准（chosen）一个value</li>
<li>learners只能获得被批准（chosen）的value</li>
</ol>
<p>批准value的过程中，首先proposers将value发送给acceptors，之后acceptors对value进行接受（accept）。</p>
<p>为了满足只批准一个value的约束，要求经“多数派（majority）”接受的value成为正式的决议（称为“批准”决议）。这是因为无论是按照人数还是按照权重划分，两组“多数派”至少有一个公共的acceptor，如果每个acceptor只能接受一个value，约束2就能保证。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">P1：一个acceptor必须接受（accept）第一次收到的提案。</span><br></pre></td></tr></table></figure>
<p>如果恰好一半acceptor接受的提案具有value A，另一半接受的提案具有value B，那么就无法形成多数派，无法批准任何一个value。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">P2a：一旦一个具有value v的提案被批准（chosen），那么之后任何acceptor再次接受（accept）的提案必须具有value v。</span><br></pre></td></tr></table></figure>
<p>由于通信是异步的，P2a和P1会发生冲突。如果一个value被批准后，一个proposer和一个acceptor从休眠中苏醒，前者提出一个具有新的value的提案。根据P1，后者应当接受，根据P2a，则不应当接受，这中场景下P2a和P1有矛盾。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">P2b：一旦一个具有value v的提案被批准（chosen），那么以后任何proposer提出的提案必须具有value v。</span><br></pre></td></tr></table></figure>
<p>由于acceptor能接受的提案都必须由proposer提出，所以P2b蕴涵了P2a，是一个更强的约束。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">P2c：如果一个编号为n的提案具有value v，那么存在一个多数派，要么他们中所有人都没有接受（accept）编号小于n </span><br><span class="line">的任何提案，要么他们已经接受（accept）的所有编号小于n的提案中编号最大的那个提案具有value v。</span><br></pre></td></tr></table></figure>
<p><strong><code>数学归纳法</code>证明P2c蕴涵P2b：</strong></p>
<p>假设具有value v的提案m获得批准，当n=m+1时，采用反证法，假如提案n不具有value v，而是具有value w，根据P2c，则存在一个多数派S1，要么他们中没有人接受过编号小于n的任何提案，要么他们已经接受的所有编号小于n的提案中编号最大的那个提案是value w。由于S1和通过提案m时的多数派C之间至少有一个公共的acceptor，所以以上两个条件都不成立，导出矛盾从而推翻假设，证明了提案n必须具有value v；</p>
<p>若（m+1）..（N-1）所有提案都具有value v，采用反证法，假如新提案N不具有value v，而是具有value w’,根据P2c，则存在一个多数派S2，要么他们没有接受过m..（N-1）中的任何提案，要么他们已经接受的所有编号小于N的提案中编号最大的那个提案是value w’。由于S2和通过m的多数派C之间至少有一个公共的acceptor，所以至少有一个acceptor曾经接受了m，从而也可以推出S2中已接受的所有编号小于n的提案中编号最大的那个提案的编号范围在m..（N-1）之间，而根据初始假设，m..（N-1）之间的所有提案都具有value v，所以S2中已接受的所有编号小于n的提案中编号最大的那个提案肯定具有value v，导出矛盾从而推翻新提案n不具有value v的假设。根据数学归纳法，我们证明了若满足P2c，则P2b一定满足。</p>
<p>P2c是可以通过消息传递模型实现的。另外，引入了P2c后，也解决了前文提到的P1不完备的问题。</p>
<p>如果一个没有chosen过任何proposer提案的acceptor在prepare过程中回答了一个proposer针对提案n的问题，但是在开始对n进行投票前，又接受（accept）了编号小于n的另一个提案（例如n-1），如果n-1和n具有不同的value，这个投票就会违背P2c。因此在prepare过程中，acceptor进行的回答同时也应包含承诺：不会再接受（accept）编号小于n的提案。这是对P1的加强：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">P1a：当且仅当acceptor没有回应过编号大于n的prepare请求时，acceptor接受（accept）编号为n的提案。</span><br></pre></td></tr></table></figure>
<p><strong>通过一个决议分为两个阶段：</strong></p>
<ol>
<li><p>prepare阶段:</p>
<ul>
<li>proposer选择一个提案编号n并将prepare请求发送给acceptors中的一个多数派</li>
<li>acceptor收到prepare消息后，如果提案的编号大于它已经回复的所有prepare消息，则acceptor将自己上次接受的提案回复给proposer，并承诺不再回复小于n的提案；</li>
</ul>
</li>
<li><p>批准阶段：</p>
<ul>
<li><p>当一个proposer收到了多数acceptors对prepare的回复后，就进入批准阶段。</p>
<p>它要向回复prepare请求的acceptors发送accept请求，包括编号n和根据P2c决定的value（如果根据P2c没有已经接受的value，那么它可以自由决定value）。</p>
</li>
<li><p>在不违背自己向其他proposer的承诺的前提下，acceptor收到accept请求后即接受这个请求。</p>
</li>
</ul>
</li>
</ol>
<hr>
<p>Reference :</p>
<ol>
<li><a href="https://zh.wikipedia.org/zh-cn/Paxos%E7%AE%97%E6%B3%95#.E5.AE.9E.E4.BE.8B" target="_blank" rel="external">Wiki Paxos算法</a></li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-04-21T13:02:24.000Z"><a href="/2016/04/21/algorithms/red-black-tree/">2016-04-21</a></time>
      
      
  
    <h1 class="title"><a href="/2016/04/21/algorithms/red-black-tree/"></a></h1>
  

    </header>
    <div class="entry">
      
        <p>###Red Black Tree</p>
<p>Red Black Tree由Rudolf Bayer发明的，当时被称为平衡二叉B树。后来，在1978年被 Leo J. Guibas 和 Robert Sedgewick 修改为如今的“红黑树”。</p>
<p>红黑树每个节点都带有颜色属性的二叉查找树，颜色为红色或黑色。二叉查找树强制一般要求以外，对于任何有效的红黑树我们增加了额外要求:</p>
<ol>
<li>节点是红色或黑色</li>
<li>根节点是黑色</li>
<li>每个叶节点是黑色的</li>
<li>每个红色节点的两个子节点都是黑色</li>
<li>从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-04-19T15:53:43.000Z"><a href="/2016/04/19/live/chess/">2016-04-19</a></time>
      
      
  
    <h1 class="title"><a href="/2016/04/19/live/chess/"></a></h1>
  

    </header>
    <div class="entry">
      
        <h3 id="Chess"><a href="#Chess" class="headerlink" title="Chess"></a>Chess</h3><p><img src="resource/chess/chess.jpg" alt="Chess"></p>
<h3 id="入门-amp-常识"><a href="#入门-amp-常识" class="headerlink" title="入门&amp;常识"></a>入门&amp;常识</h3><p>国际象棋有8*8共64个棋格，相邻的两个棋格总是黑白相间。为了方便，我们可以用A——H，和1——8这些字母和数字来标志每个格子。如下图。对局双方分为黑、白两方，各执16个棋子。这16个棋子分别是8个兵，2个车，2个马，2个象，1个王后，1个国王。只要将对方的国王吃掉就算胜利。</p>
<ol>
<li>国王。国王可以直行、横行、斜行，但是每次只能动一个格。国王死掉，棋局结束。</li>
<li>王后。王后是国际象棋中最为厉害的棋子，她可以直行、横行、斜行，且行走的格数不受限制，只要前方没有其它棋子。</li>
<li>象。只能斜行。国际象棋中有两个象，一个位于黑格，一个位于白格，着也意味着，黑格中的象永远不会出现在白格的位置。</li>
<li>马。国际象棋中的马和中国象棋中的马的行走方法是一样的，都是走“日”字。但是国际象棋中的马没有“拌腿”一说。</li>
<li>车。国际象棋中的车与中国象棋中的车一样，都是可以直走、横走，且走的格数不受限制。另外，车还有一种特殊的走法，叫做“王车易位”。每局中，对局双方都有一次同时移动国王和车的机会。但是王车易位有诸多限制。</li>
<li>兵。如果兵是第一次行走，可以走一格或者两格，如果不是第一次行走，只能走一格，且只能直行，不能横行和斜行。另外，兵吃子儿的方法比较特殊，一般，兵只能吃斜前方的子儿，吃完后占据斜前方的位置，还有一种特殊的吃法，兵一次走两格，走完后在同一横线上有对方的兵时，可以将其吃掉，然后占据斜前方的位置。这叫做“吃过路兵”。如果己方的兵走到对方的底线时，这时候兵就可以升为除国王和兵以外的其它棋子，由于王后的威力最大，所以，兵经常升为王后。</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-04-18T16:00:00.000Z"><a href="/2016/04/19/live/fitness/">2016-04-19</a></time>
      
      
  
    <h1 class="title"><a href="/2016/04/19/live/fitness/">Fitness</a></h1>
  

    </header>
    <div class="entry">
      
        
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-04-18T16:00:00.000Z"><a href="/2016/04/19/live/game/">2016-04-19</a></time>
      
      
  
    <h1 class="title"><a href="/2016/04/19/live/game/">Game</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="http://www.guokr.com/blog/777525/" target="_blank" rel="external">Nim 游戏</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">传统的Nim游戏是对一些放置成堆的一定数量的硬币开始的：硬币和堆的数量取决于你。</span><br><span class="line">有两名玩家玩这个游戏，当轮到某位玩家时，他能从某一堆里取任意数量的硬币，但是至少要取一枚硬币，但是也不能从除你取的这个堆以外的其他堆里再取硬币。</span><br><span class="line">赢家是取得最后一枚硬币的人，所以最后是没有硬币剩余的。</span><br></pre></td></tr></table></figure>
<p><img src="resource/game/NimGame.jpg" alt="Nim Game"></p>
<p>从这个🌰看 A是最终的胜者！如果我是player，如何才能必胜！！！</p>
<p>两玩家分别称为A和B，A先走。</p>
<p>一共两堆各有一枚硬币。那么显然，玩家B必胜：A必须取两个硬币里的一个，留下一个被B取走。</p>
<p>现在的两堆分别有2和1个硬币。A有必胜策略：从有两个硬币的那堆取一个。这样造成的局面和上面的例子等同，我们知道这时A会赢。</p>
<p>美国数学家Charles Bouton同样感觉到这点并促使他毫不畏惧的开始分析这个游戏。1902年他找到了这个窍门——及其精妙！</p>
<hr>
<p><strong>16个让你烧脑让你晕的悖论</strong></p>
<hr>
<p><strong>最具争议的12个数学事实</strong>  </p>
<p><em>三门问题（Monty Hall problem</em></p>
<p>参赛者会看见三扇关闭了的门，其中一扇的后面有一辆汽车，选中后面有车的那扇门可赢得该汽车，另外两扇门后面则各藏有一只山羊。</p>
<p>当参赛者选定了一扇门，但未去开启它的时候，节目主持人开启剩下两扇门的其中一扇，露出其中一只山羊。</p>
<p>主持人其后会问参赛者要不要换另一扇仍然关上的门。问题是：换另一扇门会否增加参赛者赢得汽车的机会率？</p>
<p>如果严格按照上述的条件，即主持人清楚地知道，哪扇门后是羊，那么答案是会。</p>
<p>不换门的话，赢得汽车的几率是<code>1/3</code>。</p>
<p>换门的话，赢得汽车的几率是<code>2/3</code>。</p>
<hr>
<p><em>0.999…=1</em></p>
<hr>
<p><strong>彭罗斯阶梯(Penrose stairs)</strong></p>
<p>彭罗斯阶梯是一个有名的几何学悖论，指的是一个始终向上或向下但却无限循环的阶梯，可以被视为彭罗斯三角形的一个变体，在此阶梯上永远无法找到最高的一点或者最低的一点。</p>
<p>彭罗斯阶梯不可能在三维空间内存在，但只要放入更高阶的空间，彭罗斯阶梯就可以很容易的实现。如同麦比乌斯圈、克莱因瓶。</p>
<p><img src="resource/game/PenroseStairs.jpg" alt="Penrose stairs"></p>
<hr>
<p>Reference :</p>
<ol>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzI2NjA3NTc4Ng==&amp;mid=2652077912&amp;idx=1&amp;sn=43d9cf785a9470c278c5d011fce9733b&amp;scene=23&amp;srcid=0429cBdkTUxrcr21zeU7L9i7#rd" target="_blank" rel="external">16个让你烧脑让你晕的悖论</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MjM5MTQzNzU2NA==&amp;mid=2651642931&amp;idx=1&amp;sn=b19144eafafb8509f86276ac33a46bca&amp;scene=23&amp;srcid=0724T72b2uKgzYkHuKhI8cuB#rd" target="_blank" rel="external">最具争议的12个数学事实</a></li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-04-13T16:00:00.000Z"><a href="/2016/04/14/live/coffee/">2016-04-14</a></time>
      
      
  
    <h1 class="title"><a href="/2016/04/14/live/coffee/">Coffee</a></h1>
  

    </header>
    <div class="entry">
      
        <h4 id="咖啡萃取的原理-化学反应-物理反应？！"><a href="#咖啡萃取的原理-化学反应-物理反应？！" class="headerlink" title="咖啡萃取的原理=化学反应+物理反应？！"></a><a href="http://www.wtoutiao.com/p/ZfaC0p.html" target="_blank" rel="external">咖啡萃取的原理=化学反应+物理反应？！</a></h4><p>整个咖啡冲泡分成三个阶段：润湿——萃取——水解。</p>
<p>当咖啡粉已经被高温润湿后，气体以及活泼的气体化合物首先逸散，咖啡内部的可溶有机分子同时被渗透压“拉扯”到水中，进而溶解。这个过程主要是咖啡粉与热水接触导致的一系列化学和物理变化，我们称之为“萃取”。<code>但是事实上，这个“萃取”一词也可以与“冲泡”混淆，因为萃取的确是咖啡冲泡中用时最长、影响最大的环节。</code></p>
<hr>
<h4 id="世界各地的人都喝啥样的咖啡"><a href="#世界各地的人都喝啥样的咖啡" class="headerlink" title="世界各地的人都喝啥样的咖啡?"></a><a href="http://www.wtoutiao.com/p/E2d3UJ.html" target="_blank" rel="external">世界各地的人都喝啥样的咖啡?</a></h4><p><code>德国：Pharisäer咖啡</code> 在咖啡里加2盎司朗姆酒。黑咖啡配上朗姆酒和糖，再加上点打发的奶油，味道简直没得说！</p>
<p><code>越南：鸡蛋咖啡</code> 两个蛋黄和炼乳、蜂蜜和香草共同打发，然后再倒入刚刚泡好的越南咖啡里。打发的蛋黄漂浮在咖啡之上，口感丝滑，唇齿留香。</p>
<p><code>美国：Gibraltar咖啡</code> 意大利浓缩咖啡的量加至2杯，配上打发的牛奶</p>
<p><code>西班牙：Cafe Bombón</code> 蜜糖咖啡  由浓缩咖啡和炼乳制成。</p>
<p><code>土耳其：土耳其咖啡</code> 土耳其咖啡壶冲煮研磨极为精细的咖啡粉，口味香甜，口感醇厚。</p>
<p><code>法国：Cafe au Lait</code> 等量的咖啡和打发的牛奶制成。法国人还喜欢在咖啡里加入菊苣，以增加咖啡的甜度。</p>
<p><code>墨西哥：Cafe de Olla</code> 用锅煮的咖啡 将深度烘焙的、研磨好的咖啡粉用煎锅熬制，并加入肉桂棒、橙皮和棕糖。直到棕糖完全融化，关火浸泡5分钟，即可趁热饮用</p>
<p><code>意大利：Romano意大利浓缩咖啡</code> 浓缩咖啡里加入一片柠檬</p>
<p><code>新西兰和澳大利亚：Flat White咖啡</code>  双倍意大利浓缩咖啡和打发至口感细腻的牛奶制成。有人说这种咖啡的口味介于卡布奇诺和拿铁之间。</p>
<p><code>希腊：Frappe咖啡</code> 冰饮咖啡，用速溶咖啡、糖、加水威士忌制成。</p>
<p><code>澳大利亚：Kaisermelange咖啡</code> 皇帝特饮（Emperor’s Blend） 咖啡里加入蛋黄、糖和干邑白兰地</p>
<hr>
<h4 id="咖啡中的酸究竟是什么东西？"><a href="#咖啡中的酸究竟是什么东西？" class="headerlink" title="咖啡中的酸究竟是什么东西？"></a><a href="http://mp.weixin.qq.com/s?__biz=MjM5MTQ3NzE2Mw==&amp;mid=2650452906&amp;idx=2&amp;sn=b8276caa1fb3fcc1a3b1e47b89cd1d65&amp;scene=23&amp;srcid=062550iubemhngkbFlEObyD2#rd" target="_blank" rel="external">咖啡中的酸究竟是什么东西？</a></h4><p>酸是一种化学物质，特征是具有酸味。“酸”在英文中叫做“acid”，拉丁语中意为“sour”。在化学上，酸的水溶液PH值均小于7，且数值越小酸性越大。</p>
<p>很多食物中含有酸性化合物，常见的食物有柠檬，醋，酸奶或咖啡等。单是咖啡，就含有数百种酸性化合物，接下来我们将介绍主要几种影响人类口感的酸。</p>
<ol>
<li>Citric Acid (柠檬酸) : 柠檬酸主要存在于柑橘类水果中，也是大多数蔬菜和水果中常见的酸。柠檬酸是最容易被识别的一种酸性化合物。</li>
<li>Malic Acid (苹果酸) : 青苹果和大黄中含有大量苹果酸。在烹饪界，苹果酸常与青柠檬联系在一起，苹果酸也被认为是一种“未成熟的水果味”。因为随着果实的成熟，其含有的酸度会慢慢降低，所以未成熟的水果或绿葡萄，猕猴桃和醋栗等绿颜色的水果酸度都比较低。</li>
<li>Tartaric Acid (酒石酸) : 葡萄中通常含有较多的酒石酸，酒石是酿酒过程中自然出现的一种物质，其主要成分是酒石酸。酒石还可以用作食品的膨松剂。酒石酸最突出的特点是口感明显。它会让人酸得直流口水，并且它的余韵苦涩。酒石酸也是超酸糖果的主要成分。</li>
<li>Acetic Acid (乙酸) : 乙酸很特别，不仅尝起来很酸，而且闻起来也有一股刺鼻的酸味。浓度低的乙酸会散发令人愉悦的青柠檬味，浓度高的乙酸尝起来和闻起来都有一股发酵的味道。</li>
</ol>
<p>以风味明亮的浅烘焙非洲咖啡豆为例，首先萃取后测试到它的PH值为4.6，可以对应到葡萄，桃子，李子，菠萝等水果风味。接着你在嘴里发现了酒石酸的涩味，也许你会将这个认为是葡萄酸或其他果酸。然后再找到相对应的水果风味。同样，具有柠檬味的低pH值可确定为“柠檬酸”，具有柠檬酸的较高pH值可能为橙子风味。如果pH值较低，苹果酸味道较多可能是青柠檬风味；如果pH值较高，苹果酸味道也较多可能是大黄、青苹果，或葡萄柚的风味。</p>
<hr>
<h4 id="100-vs-36-数量与质量的对决"><a href="#100-vs-36-数量与质量的对决" class="headerlink" title="100 vs 36 | 数量与质量的对决"></a><a href="http://mp.weixin.qq.com/s?__biz=MjM5MTQ3NzE2Mw==&amp;mid=2650453005&amp;idx=1&amp;sn=09ba8b31f8ee99a9756aade2aa1f781c&amp;scene=23&amp;srcid=0628w1S1CodBU58mZv36O1iD#rd" target="_blank" rel="external">100 vs 36 | 数量与质量的对决</a></h4><p>Coffee Aroma Kit T100又称为Coffee Flavor Map(以下简称T100)，在今年2016SCAA展会中首次亮相。SCAA官方网站推荐购买。</p>
<p><code>T100</code>是由Kicci公司旗下的SCENTONE所推出的咖啡风味闻香瓶。正如名字，有着100个风味，并进行了相应的分组。分别是：</p>
<ol>
<li>Tropical Fruit 热带水果类</li>
<li>Berry-Like 浆果类</li>
<li>Citrus &amp; Other Fruits 柑橘类和其他水果类</li>
<li>Stone Fruit 核果类</li>
<li>Cereal &amp; Nut 谷物类和坚果类</li>
<li>Ceramel &amp; Chocolate 焦糖类和巧克力类</li>
<li>Herb &amp; Flower 草本类和花香类</li>
<li>Spice 香料类</li>
<li>Vegetable 蔬菜类</li>
<li>咸味类和其他类</li>
</ol>
<p><code>Le Nez Du Cafe 36</code>，SCAA委托法国香水研发机构Éditions Jean Lenoir设计咖啡风味瓶。老板Jean也设计过红酒专用的酒鼻子Le Nez Du Vin kit，酒鼻子有着56味。</p>
<p>咖啡闻香瓶一直被用于CQI Q-Grader的培训当中，并按照烘焙过程当中的不同阶段的反应进行了分类，分别为4组4个大类，12个小类。</p>
<ol>
<li>Enzymatic 酶促化反应组-Flowery-Fruity-Herbal</li>
<li>Dry Distillation 干馏化反应组 </li>
<li>Sugar Browning 焦糖化反应组 Carmelly-Nutty-Chocolaty</li>
<li>Taints 瑕疵风味/异味组 Earthy-Fermented-Phenoli</li>
</ol>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">治疗咖啡因上瘾的唯一方法是提高对咖啡的品鉴能力</span><br><span class="line"></span><br><span class="line">当一个人不再单纯地沉溺于咖啡因带来的神经兴奋而能够感知鞣酸、果香、酒味、苦涩、芳醇等细致的风味时</span><br><span class="line"></span><br><span class="line">他就再也不会对咖啡因上瘾了—— 他会对咖啡本身的味道上瘾</span><br></pre></td></tr></table></figure>
<hr>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-01-21T08:57:31.000Z"><a href="/2016/01/21/distribution/flume/">2016-01-21</a></time>
      
      
  
    <h1 class="title"><a href="/2016/01/21/distribution/flume/"></a></h1>
  

    </header>
    <div class="entry">
      
        <p>###Flume</p>
<p>#####Source<br><code>Source</code> is to receive data from an external client and store it into the configured Channels. A Source can get an instance of its own ChannelProcessor to process an Event, commited within a Channel local transaction, in serial. In the case of an exception, required Channels will propagate the exception, all Channels will rollback their transaction, but events processed previously on other Channels will remain committed.</p>
<p>Similar to the SinkRunner.PollingRunner Runnable, there’s a PollingRunner Runnable that executes on a thread created when the Flume framework calls PollableSourceRunner.start(). Each configured PollableSource is associated with its own thread that runs a PollingRunner. This thread manages the PollableSource’s lifecycle, such as starting and stopping. A PollableSource implementation must implement the start() and stop() methods that are declared in the LifecycleAware interface. The runner of a PollableSource invokes that Source‘s process() method. The process() method should check for new data and store it into the Channel as Flume Events.</p>
<p>Note that there are actually two types of Sources. The PollableSource was already mentioned. The other is the EventDrivenSource. The EventDrivenSource, unlike the PollableSource, must have its own callback mechanism that captures the new data and stores it into the Channel. The EventDrivenSources are not each driven by their own thread like the PollableSources are. Below is an example of a custom PollableSource:</p>
<p>#####Channel</p>
<p>#####Sink</p>
<p>#####Exceptions Collection</p>
<ol>
<li><code>Space for commit to queue couldn&#39;t be acquired Sinks are likely not keeping up with sources, or the buffer size is too tight</code></li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-01-21T08:57:31.000Z"><a href="/2016/01/21/distribution/flink/">2016-01-21</a></time>
      
      
  
    <h1 class="title"><a href="/2016/01/21/distribution/flink/"></a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="Flink"><a href="#Flink" class="headerlink" title="Flink"></a>Flink</h2><p>When the Flink system is started, it bring up the JobManager and one or more TaskManagers. </p>
<p>The JobManager is the coordinator of the Flink system, while the TaskManagers are the workers that execute parts of the parallel programs. When starting the system in local mode, a single JobManager and TaskManager are brought up within the same JVM.</p>
<p><img src="../resource/distribution/flink/process_model.svg" alt="flink process model"></p>
<h3 id="Command-Line-Interface"><a href="#Command-Line-Interface" class="headerlink" title="Command Line Interface"></a>Command Line Interface</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">bin/flink</span><br><span class="line">./flink &lt;ACTION&gt; [OPTIONS] [ARGUMENTS]</span><br><span class="line"></span><br><span class="line">The following actions are available:</span><br><span class="line"></span><br><span class="line">Action &quot;run&quot; compiles and runs a program.</span><br><span class="line"></span><br><span class="line">  Syntax: run [OPTIONS] &lt;jar-file&gt; &lt;arguments&gt;</span><br><span class="line">  &quot;run&quot; action options:</span><br><span class="line">     -c,--class &lt;classname&gt;           Class with the program entry point (&quot;main&quot;</span><br><span class="line">                                      method or &quot;getPlan()&quot; method. Only needed</span><br><span class="line">                                      if the JAR file does not specify the class</span><br><span class="line">                                      in its manifest.</span><br><span class="line">     -m,--jobmanager &lt;host:port&gt;      Address of the JobManager (master) to</span><br><span class="line">                                      which to connect. Specify &apos;yarn-cluster&apos;</span><br><span class="line">                                      as the JobManager to deploy a YARN cluster</span><br><span class="line">                                      for the job. Use this flag to connect to a</span><br><span class="line">                                      different JobManager than the one</span><br><span class="line">                                      specified in the configuration.</span><br><span class="line">     -p,--parallelism &lt;parallelism&gt;   The parallelism with which to run the</span><br><span class="line">                                      program. Optional flag to override the</span><br><span class="line">                                      default value specified in the</span><br><span class="line">                                      configuration.</span><br><span class="line">  Additional arguments if -m yarn-cluster is set:</span><br><span class="line">     -yd,--yarndetached                   Start detached</span><br><span class="line">     -yD &lt;arg&gt;                            Dynamic properties</span><br><span class="line">     -yj,--yarnjar &lt;arg&gt;                  Path to Flink jar file</span><br><span class="line">     -yjm,--yarnjobManagerMemory &lt;arg&gt;    Memory for JobManager Container [in</span><br><span class="line">                                          MB]</span><br><span class="line">     -yn,--yarncontainer &lt;arg&gt;            Number of YARN container to allocate</span><br><span class="line">                                          (=Number of Task Managers)</span><br><span class="line">     -ynm,--yarnname &lt;arg&gt;                Set a custom name for the application</span><br><span class="line">                                          on YARN</span><br><span class="line">     -yq,--yarnquery                      Display available YARN resources</span><br><span class="line">                                          (memory, cores)</span><br><span class="line">     -yqu,--yarnqueue &lt;arg&gt;               Specify YARN queue.</span><br><span class="line">     -ys,--yarnslots &lt;arg&gt;                Number of slots per TaskManager</span><br><span class="line">     -yst,--yarnstreaming                 Start Flink in streaming mode</span><br><span class="line">     -yt,--yarnship &lt;arg&gt;                 Ship files in the specified directory</span><br><span class="line">                                          (t for transfer)</span><br><span class="line">     -ytm,--yarntaskManagerMemory &lt;arg&gt;   Memory per TaskManager Container [in</span><br><span class="line">                                          MB]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action &quot;info&quot; shows the optimized execution plan of the program (JSON).</span><br><span class="line"></span><br><span class="line">  Syntax: info [OPTIONS] &lt;jar-file&gt; &lt;arguments&gt;</span><br><span class="line">  &quot;info&quot; action options:</span><br><span class="line">     -c,--class &lt;classname&gt;           Class with the program entry point (&quot;main&quot;</span><br><span class="line">                                      method or &quot;getPlan()&quot; method. Only needed</span><br><span class="line">                                      if the JAR file does not specify the class</span><br><span class="line">                                      in its manifest.</span><br><span class="line">     -m,--jobmanager &lt;host:port&gt;      Address of the JobManager (master) to</span><br><span class="line">                                      which to connect. Specify &apos;yarn-cluster&apos;</span><br><span class="line">                                      as the JobManager to deploy a YARN cluster</span><br><span class="line">                                      for the job. Use this flag to connect to a</span><br><span class="line">                                      different JobManager than the one</span><br><span class="line">                                      specified in the configuration.</span><br><span class="line">     -p,--parallelism &lt;parallelism&gt;   The parallelism with which to run the</span><br><span class="line">                                      program. Optional flag to override the</span><br><span class="line">                                      default value specified in the</span><br><span class="line">                                      configuration.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action &quot;list&quot; lists running and scheduled programs.</span><br><span class="line"></span><br><span class="line">  Syntax: list [OPTIONS]</span><br><span class="line">  &quot;list&quot; action options:</span><br><span class="line">     -m,--jobmanager &lt;host:port&gt;   Address of the JobManager (master) to which</span><br><span class="line">                                   to connect. Specify &apos;yarn-cluster&apos; as the</span><br><span class="line">                                   JobManager to deploy a YARN cluster for the</span><br><span class="line">                                   job. Use this flag to connect to a different</span><br><span class="line">                                   JobManager than the one specified in the</span><br><span class="line">                                   configuration.</span><br><span class="line">     -r,--running                  Show only running programs and their JobIDs</span><br><span class="line">     -s,--scheduled                Show only scheduled programs and their JobIDs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action &quot;cancel&quot; cancels a running program.</span><br><span class="line"></span><br><span class="line">  Syntax: cancel [OPTIONS] &lt;Job ID&gt;</span><br><span class="line">  &quot;cancel&quot; action options:</span><br><span class="line">     -m,--jobmanager &lt;host:port&gt;   Address of the JobManager (master) to which</span><br><span class="line">                                   to connect. Specify &apos;yarn-cluster&apos; as the</span><br><span class="line">                                   JobManager to deploy a YARN cluster for the</span><br><span class="line">                                   job. Use this flag to connect to a different</span><br><span class="line">                                   JobManager than the one specified in the</span><br><span class="line">                                   configuration.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Please specify an action.</span><br></pre></td></tr></table></figure>
<p>###Configuration</p>
<p>###Web Client<br>Flink provides a web interface to upload jobs, inspect their execution plans, and execute them. </p>
<p>The web interface runs on port 8080 by default.To specify a custom port set the webclient.port property in the conf/flink.yaml.</p>
<p>Jobs are submitted to the JobManager specified by jobmanager.rpc.address and jobmanager.rpc.port.</p>
<p><code>job view</code> Upload a Flink program as a jar file, execute an uploaded program.</p>
<p> jar’s manifest file does not specify the program class, you can specify it before the argument list as:<code>-c &lt;assemblerClass&gt; &lt;programArgs...&gt;</code></p>
<p><code>Plan View</code>  optimized execution plan of the submitted program in the upper half of the page.</p>
<h3 id="DataSet"><a href="#DataSet" class="headerlink" title="DataSet"></a>DataSet</h3><p>The batch processing APIs of Flink are centered around the DataSet abstraction. </p>
<p>A DataSet is only an abstract representation of a set of data that can contain duplicates.</p>
<table>
<thead>
<tr>
<th>Transformation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Map</td>
<td></td>
</tr>
<tr>
<td>FlatMap</td>
<td></td>
</tr>
<tr>
<td>MapPartition</td>
<td></td>
</tr>
<tr>
<td>Filter</td>
<td></td>
</tr>
<tr>
<td>Reduce</td>
<td></td>
</tr>
<tr>
<td>ReduceGroup</td>
<td></td>
</tr>
<tr>
<td>Aggregate</td>
<td></td>
</tr>
<tr>
<td>Join</td>
<td></td>
</tr>
<tr>
<td>CoGroup</td>
<td></td>
</tr>
<tr>
<td>Cross</td>
<td></td>
</tr>
<tr>
<td>Union</td>
<td></td>
</tr>
<tr>
<td>Rebalance</td>
<td></td>
</tr>
<tr>
<td>Hash-Partition</td>
<td></td>
</tr>
<tr>
<td>Custom Partitioning</td>
<td></td>
</tr>
<tr>
<td>Sort Partition</td>
<td></td>
</tr>
<tr>
<td>First-n</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="Program-Skeleton"><a href="#Program-Skeleton" class="headerlink" title="Program Skeleton"></a>Program Skeleton</h3><p>Flink programs look like regular Java programs with a main() method. Each program consists of the same basic parts:</p>
<ol>
<li>Obtain an ExecutionEnvironment</li>
<li>Load/create the initial data</li>
<li>Specify transformations on this data</li>
<li>Specify where to put the results</li>
<li>Trigger the program execution</li>
</ol>
<h3 id="DataSet-Transformations"><a href="#DataSet-Transformations" class="headerlink" title="DataSet Transformations"></a>DataSet Transformations</h3><h5 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h5><p>Applies a map function on each element of a DataSet.</p>
<p>One element must be returned by the function.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.flink.api.common.functions.MapFunction;</span><br><span class="line">import org.apache.flink.api.java.tuple.Tuple2;</span><br><span class="line"></span><br><span class="line">public class SumMapFunction implements MapFunction&lt;Tuple2&lt;Integer, Integer&gt;, Integer&gt; &#123;</span><br><span class="line"></span><br><span class="line">	private static final long serialVersionUID = 3830811031233724943L;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public Integer map(Tuple2&lt;Integer, Integer&gt; tuple) throws Exception &#123;</span><br><span class="line">		return tuple.f0 + tuple.f1;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="FlatMap"><a href="#FlatMap" class="headerlink" title="FlatMap"></a>FlatMap</h5><p>Applies a flat-map function on each element of a DataSet. </p>
<p>This variant of a map function can return arbitrary many result elements (including none) for each input element.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.flink.api.common.functions.FlatMapFunction;</span><br><span class="line">import org.apache.flink.util.Collector;</span><br><span class="line"></span><br><span class="line">public class Tokenizer implements FlatMapFunction&lt;String, String&gt; &#123;</span><br><span class="line"></span><br><span class="line">	private static final long serialVersionUID = 2350322299357354023L;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void flatMap(String line, Collector&lt;String&gt; collector) throws Exception &#123;</span><br><span class="line">		for (String token : line.split(&quot;\\W&quot;)) &#123;</span><br><span class="line">			collector.collect(token);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="MapPartition"><a href="#MapPartition" class="headerlink" title="MapPartition"></a>MapPartition</h5><p>Transforms a parallel partition in a single function call. </p>
<p>The map-partition function gets the partition as Iterable and can produce an arbitrary number of result values. </p>
<p>The number of elements in each partition depends on the degree-of-parallelism and previous operations.</p>
<h5 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h5><h5 id="Project"><a href="#Project" class="headerlink" title="Project"></a>Project</h5><h5 id="Grouped-DataSet"><a href="#Grouped-DataSet" class="headerlink" title="Grouped DataSet"></a>Grouped DataSet</h5><h5 id="Combinable-GroupReduceFunctions"><a href="#Combinable-GroupReduceFunctions" class="headerlink" title="Combinable GroupReduceFunctions"></a>Combinable GroupReduceFunctions</h5><h5 id="GroupCombine-on-a-Grouped-DataSet"><a href="#GroupCombine-on-a-Grouped-DataSet" class="headerlink" title="GroupCombine on a Grouped DataSet"></a>GroupCombine on a Grouped DataSet</h5><h5 id="Aggregate-on-Grouped-Tuple-DataSet"><a href="#Aggregate-on-Grouped-Tuple-DataSet" class="headerlink" title="Aggregate on Grouped Tuple DataSet"></a>Aggregate on Grouped Tuple DataSet</h5><h5 id="Reduce-on-full-DataSet"><a href="#Reduce-on-full-DataSet" class="headerlink" title="Reduce on full DataSet"></a>Reduce on full DataSet</h5><h5 id="GroupReduce-on-full-DataSet"><a href="#GroupReduce-on-full-DataSet" class="headerlink" title="GroupReduce on full DataSet"></a>GroupReduce on full DataSet</h5><h5 id="Join"><a href="#Join" class="headerlink" title="Join"></a>Join</h5><h5 id="Cross"><a href="#Cross" class="headerlink" title="Cross"></a>Cross</h5><h5 id="CoGroup"><a href="#CoGroup" class="headerlink" title="CoGroup"></a>CoGroup</h5><h5 id="Union"><a href="#Union" class="headerlink" title="Union"></a>Union</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals1 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals2 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals3 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; unioned = vals1.union(vals2).union(vals3);</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals1 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals2 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals3 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; unioned = vals1.union(vals2).union(vals3);</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals1 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals2 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals3 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; unioned = vals1.union(vals2).union(vals3);</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals1 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals2 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals3 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; unioned = vals1.union(vals2).union(vals3);DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals1 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals2 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals3 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; unioned = vals1.union(vals2).union(vals3);DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals1 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals2 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals3 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; unioned = vals1.union(vals2).union(vals3);DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals1 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals2 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; vals3 = // [...]</span><br><span class="line">DataSet&lt;Tuple2&lt;String, Integer&gt;&gt; unioned = vals1.union(vals2).union(vals3);</span><br></pre></td></tr></table></figure>
<h5 id="First-n"><a href="#First-n" class="headerlink" title="First-n"></a>First-n</h5><h3 id="Flink-Streaming"><a href="#Flink-Streaming" class="headerlink" title="Flink Streaming"></a>Flink Streaming</h3><p><code>Transformations</code></p>
<p>Data transformations transform one or more DataStreams into a new DataStream.</p>
<table>
<thead>
<tr>
<th>Transformation</th>
<th>Structure</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Map</td>
<td>DataStream → DataStream</td>
<td>Takes one element and produces one element.</td>
<td>dataStream.map { x =&gt; x * 2 }</td>
</tr>
<tr>
<td>FlatMap</td>
<td>DataStream → DataStream</td>
<td>Takes one element and produces zero, one, or more elements.</td>
<td>dataStream.flatMap { str =&gt; str.split(“ “) }</td>
</tr>
<tr>
<td>Filter</td>
<td>DataStream → DataStream</td>
<td>Evaluates a boolean function for each element and retains those for which the function returns true.</td>
<td>dataStream.filter { _ != 0 }</td>
</tr>
<tr>
<td>KeyBy</td>
<td>DataStream → KeyedStream</td>
<td>Logically partitions a stream into disjoint partitions, each partition containing elements of the same key.</td>
<td>dataStream.keyBy(“someKey”) dataStream.keyBy(0) </td>
</tr>
<tr>
<td>Reduce</td>
<td>KeyedStream → DataStream</td>
<td></td>
<td>keyedStream.reduce { <em> + </em> }</td>
</tr>
<tr>
<td>Fold</td>
<td>KeyedStream → DataStream</td>
<td></td>
<td>val result: DataStream[String] = keyedStream.fold(“start”, (str, i) =&gt; { str + “-“ + i })</td>
</tr>
<tr>
<td>Aggregations</td>
<td>KeyedStream → DataStream</td>
<td></td>
<td>keyedStream.sum(0) keyedStream.sum(“key”) keyedStream.min(0) keyedStream.min(“key”) keyedStream.max(0) keyedStream.max(“key”) keyedStream.minBy(0) keyedStream.minBy(“key”) keyedStream.maxBy(0) keyedStream.maxBy(“key”)</td>
</tr>
<tr>
<td>Window</td>
<td>KeyedStream → WindowedStream</td>
<td></td>
<td>dataStream.keyBy(0).window(TumblingTimeWindows.of(Time.of(5, TimeUnit.SECONDS)))</td>
</tr>
<tr>
<td>WindowAll</td>
<td>DataStream → AllWindowedStream</td>
<td></td>
<td>dataStream.windowAll(TumblingTimeWindows.of(Time.of(5, TimeUnit.SECONDS)))</td>
</tr>
<tr>
<td>Window Apply</td>
<td>WindowedStream → DataStream AllWindowedStream → DataStream</td>
<td></td>
<td>windowedStream.apply { applyFunction }</td>
</tr>
<tr>
<td>Window Reduce</td>
<td>WindowedStream → DataStream</td>
<td></td>
<td>windowedStream.reduce { <em> + </em> }</td>
</tr>
<tr>
<td>Window Fold</td>
<td>WindowedStream → DataStream</td>
<td></td>
<td>val result: DataStream[String] = windowedStream.fold(“start”, (str, i) =&gt; { str + “-“ + i })</td>
</tr>
<tr>
<td>Aggregations on windows</td>
<td>WindowedStream → DataStream</td>
<td></td>
<td>windowedStream.sum(0) windowedStream.sum(“key”) windowedStream.min(0) windowedStream.min(“key”) windowedStream.max(0) windowedStream.max(“key”) windowedStream.minBy(0) windowedStream.minBy(“key”) windowedStream.maxBy(0) windowedStream.maxBy(“key”)</td>
</tr>
<tr>
<td>Union</td>
<td>DataStream* → DataStream</td>
<td></td>
<td>dataStream.union(otherStream1, otherStream2, …)</td>
</tr>
<tr>
<td>Window Join</td>
<td>DataStream,DataStream → DataStream</td>
<td></td>
<td>dataStream.join(otherStream).where(0).equalTo(1).window(TumblingTimeWindows.of(Time.of(3, TimeUnit.SECONDS))).apply { … }</td>
</tr>
<tr>
<td>Window CoGroup</td>
<td>DataStream,DataStream → DataStream</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Connect</td>
<td>DataStream,DataStream → ConnectedStreams</td>
<td></td>
<td></td>
</tr>
<tr>
<td>CoMap, CoFlatMap</td>
<td>ConnectedStreams → DataStream</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Split</td>
<td>DataStream → SplitStream</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Select</td>
<td>SplitStream → DataStream</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Iterate</td>
<td>DataStream → IterativeStream → DataStream</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Extract Timestamps</td>
<td>DataStream → DataStream</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="Table-API-Relational-Queries"><a href="#Table-API-Relational-Queries" class="headerlink" title="Table API - Relational Queries"></a>Table API - Relational Queries</h4><p>Flink provides an API that allows specifying operations using SQL-like expressions.</p>
<p>Reference :</p>
<ol>
<li><a href="https://flink.apache.org/news/2015/02/09/streaming-example.html" target="_blank" rel="external">Introducing Flink Streaming</a></li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-01-21T08:57:31.000Z"><a href="/2016/01/21/distribution/gearpump/">2016-01-21</a></time>
      
      
  
    <h1 class="title"><a href="/2016/01/21/distribution/gearpump/"></a></h1>
  

    </header>
    <div class="entry">
      
        <p>####Gearpump</p>
<p>#####Basic Concepts</p>
<ol>
<li><p>System timestamp and Application timestamp</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   System timestamp is the time of backend cluster system. </span><br><span class="line">   Application timestamp is the time at which message generated.</span><br><span class="line">   ``` </span><br><span class="line"></span><br><span class="line">2. Master, and Worker</span><br></pre></td></tr></table></figure>
<p> Gearpump follow master slave architecture.<br> Every cluster contains one or more Master node, and several worker nodes.<br> Worker node is responsible to manage local resources on single machine.<br> Master node is responsible to manage global resources of the whole cluster.    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"></span><br><span class="line">3. Application</span><br></pre></td></tr></table></figure>
<p>Gearpump natively supports Streaming Application types</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">4. AppMaster and Executor</span><br></pre></td></tr></table></figure>
</li>
</ol>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">5. Application Submission Flow</span><br></pre></td></tr></table></figure>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">6. Streaming Topology, Processor, and Task</span><br></pre></td></tr></table></figure>
<p>   Each application contains a topology, which is a DAG to describe the data flow.<br>   Each node in the DAG is a processor.<br>   An application is a DAG of processors. Each processor handles messages.<br>   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   ![Directed Acyclic Graph](../resource/distribution/gearpump/dag.png)   </span><br><span class="line">   </span><br><span class="line">7. Streaming Task and Partitioner</span><br></pre></td></tr></table></figure></p>
<p>   Task is the minimum unit of parallelism.<br>   ``` </p>
<p>#####Command Line Interface</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
    <a href="/page/5/" class="alignleft prev">Prev</a>
  
  
    <a href="/page/7/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/Distributed/">Distributed</a><small>6</small></li>
  
    <li><a href="/categories/Language/">Language</a><small>4</small></li>
  
    <li><a href="/categories/Machine-Learning/">Machine Learning</a><small>1</small></li>
  
    <li><a href="/categories/Storage/">Storage</a><small>1</small></li>
  
    <li><a href="/categories/live/">live</a><small>3</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Alluxio/">Alluxio</a><small>1</small></li>
  
    <li><a href="/tags/Clojure/">Clojure</a><small>1</small></li>
  
    <li><a href="/tags/Hadoop/">Hadoop</a><small>4</small></li>
  
    <li><a href="/tags/JVM/">JVM</a><small>1</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>1</small></li>
  
    <li><a href="/tags/RocksDB/">RocksDB</a><small>1</small></li>
  
    <li><a href="/tags/Scala/">Scala</a><small>1</small></li>
  
    <li><a href="/tags/TensorFlow/">TensorFlow</a><small>1</small></li>
  
    <li><a href="/tags/coffee/">coffee</a><small>1</small></li>
  
    <li><a href="/tags/fitness/">fitness</a><small>1</small></li>
  
    <li><a href="/tags/game/">game</a><small>1</small></li>
  
    <li><a href="/tags/spark/">spark</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2016 Darion Yaphet
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
